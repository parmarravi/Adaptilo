<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Adaptilo : Simple Demo</title>
        <link rel="stylesheet" href="css/reset.css"/>
        <link rel="stylesheet" href="css/main.css"/>
    </head>
    
    <body>
    
        <div id="fixed_header">        
            <h1>
                Adaptilo Simple Demo
            </h1>
        </div>
        
        <div class="block">
            <div class="card centered" id="connection_card">
            
                <div class="card_content">
                    
                    <table id="connection_settings">
                        <tr>
                            <td>
                                <label for="hostIp">Host Ip</label>
                            </td>
                            <td>
                                <input id="server_ip" name="server_ip" value="192.168.1.6">
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="port">Port</label>
                            </td>
                            <td>
                                <input id="server_port" name="server_port" value="8887">
                            </td>
                        </tr>
						<tr>
                            <td>
                                <label for="port">Join Room</label>
                            </td>
                            <td>
                                <input id="join_room" name="server_port" value="">
                            </td>
                        </tr>
                    </table> 
                </div>
                
                <button id="connection_button" type="button" class="card_button">Connect</button>            
                
            </div>
        </div>
    
        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="js/main.js"></script>
        
        <script type="text/javascript">
            $(function() {
                // the DOM is now fully loaded.                
                var platformConfiguration = Adaptilo.Configuration.createDefault();  
                
                // Set the onConnected behavior
                platformConfiguration.onConnected = function(roles) {
                    console.log("onConnected");
                    console.log(roles);
                    $("#connection_button").html("Disconnect");
                };
                
                // Set the onDisconnected behavior
                platformConfiguration.onDisconnected = function() {
                    console.log("onDisconnected");
                    $("#connection_button").html("Connect");
                }
                
                // Create the platform
                var platform = new Adaptilo.Platform();
                
                $("#connection_button").bind("click", function() {
                    toggleConnection();
                });
                
                var toggleConnection = function() {
                    if (platform.isConnected) {
                        platform.disconnect();
                    } else {
                        // Get the server ip given by the user
                        platformConfiguration.serverIp = $("#server_ip").val()
                        // Get the server port given by the user
                        platformConfiguration.serverPort = $("#server_port").val();
                        // Set the game name used by the server
                        platformConfiguration.gameName = "testGame";
                        // Set game room for joining an existed one
                        if($("#join_room").val()){
                            platformConfiguration.gameRoom = $("#join_room").val();
                        }
                        
                        // Use the configuration for the connection
                        platform.setConfiguration(platformConfiguration);
                        platform.connect();                   
                    }
                };                
                
            });     

            
        </script>
    </boby>
    
</html>
    